<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart RPS Predictor</title>
</head>
<body>
    <h2>Smart Rock-Paper-Scissors Predictor</h2>
    <p>Choose Rock, Paper, or Scissors, and I'll try to predict your next choice!</p>
    
    <button onclick="submitChoice(1)">Rock</button>
    <button onclick="submitChoice(2)">Paper</button>
    <button onclick="submitChoice(3)">Scissors</button>
    
    <p id="prediction" style="display: none;">AI's move: </p>

    <script>
        let history = [];
        let lastPrediction = null;
        const choices = {1: "Paper", 2: "Scissors", 3: "Rocks"};

        function submitChoice(choice) {
            let predictionElement = document.getElementById("prediction");
            
            if (lastPrediction !== null) {
                predictionElement.innerText = "AI's move: " + choices[lastPrediction];
                predictionElement.style.display = "block";
            }
            
            history.push(choice);
            lastPrediction = Math.max(1, Math.min(3, advancedPatternGuess()));
        }

        function advancedPatternGuess() {
            if (history.length < 4) {
                return Math.floor(Math.random() * 3) + 1; // Random guess between 1 and 3 initially
            }

            let diffs = [];
            for (let i = 1; i < history.length; i++) {
                diffs.push(history[i] - history[i - 1]);
            }

            // Detect repeating difference patterns
            for (let len = Math.floor(diffs.length / 2); len > 0; len--) {
                let recent = diffs.slice(-len);
                let before = diffs.slice(-2 * len, -len);
                if (JSON.stringify(recent) === JSON.stringify(before)) {
                    return Math.max(1, Math.min(3, history[history.length - 1] + recent[0]));
                }
            }

            // Default to using the last difference
            return Math.max(1, Math.min(3, history[history.length - 1] + diffs[diffs.length - 1]));
        }
    </script>
</body>
</html>
